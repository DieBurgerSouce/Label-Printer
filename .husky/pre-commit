#!/bin/bash
# Git Pre-Commit Hook - Screenshot_Algo
# Runs checks only on staged files

set -e

echo "ğŸ” Running pre-commit checks on staged files..."

# Get staged TypeScript files
STAGED_TS_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(ts|tsx)$' || true)

if [ -n "$STAGED_TS_FILES" ]; then
  echo "ğŸ“ Checking ESLint on staged files..."
  # Allow warnings but fail on errors
  npx eslint $STAGED_TS_FILES

  echo "âœ¨ Running Prettier on staged files..."
  npx prettier --check $STAGED_TS_FILES
fi

echo "âœ… All pre-commit checks passed!"
